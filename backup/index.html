<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maa Ka Pyaar - Home Food Delivery</title>
    
    <!-- Google Fonts - Professional Typography -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- External CSS Stylesheet -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- ==================================================================================
         SECTION 1: LANDING PAGE - Role Selection Screen
         Purpose: User selects whether they are a Student (Customer) or Mother (Cook)
         ================================================================================== -->
    <div id="landing-screen" class="screen active">
        
        <!-- Header with App Name and Tagline -->
        <header class="hero-header">
            <h1 class="brand-title">‚ù§Ô∏è Maa Ka Pyaar</h1>
            <p class="tagline">Connecting Home Kitchens with Hungry Students</p>
        </header>

        <!-- Role Selection Cards -->
        <div class="role-selection-container">
            <h2 class="section-heading">Choose Your Role</h2>
            
            <div class="role-cards">
                <!-- Student/Customer Card -->
                <div class="role-card" onclick="selectRole('student')">
                    <div class="role-icon">üßë‚Äçüíª</div>
                    <h3 class="role-title">I'm a Student</h3>
                    <p class="role-description">Order delicious home-cooked food</p>
                </div>

                <!-- Mother/Cook Card -->
                <div class="role-card" onclick="selectRole('mother')">
                    <div class="role-icon">üë©‚Äçüç≥</div>
                    <h3 class="role-title">I'm a Mother</h3>
                    <p class="role-description">Share your cooking with students</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================================================================================
         SECTION 2: LOGIN SCREEN - User Authentication
         Purpose: Simple login form for both Students and Mothers
         ================================================================================== -->
    <div id="login-screen" class="screen">
        
        <div class="login-container">
            <!-- Login Card -->
            <div class="login-card">
                <h2 id="login-title" class="card-title">Welcome Back!</h2>
                <p class="card-subtitle">Enter your details to continue</p>

                <!-- Login Form -->
                <form id="login-form" onsubmit="handleLogin(event)">
                    <!-- Name Input -->
                    <div class="form-group">
                        <label for="user-name">Your Name</label>
                        <input 
                            type="text" 
                            id="user-name" 
                            placeholder="Enter your name" 
                            required
                            autocomplete="name">
                    </div>

                    <!-- Mobile Number Input -->
                    <div class="form-group">
                        <label for="user-mobile">Mobile Number</label>
                        <input 
                            type="tel" 
                            id="user-mobile" 
                            placeholder="Enter 10-digit mobile number" 
                            pattern="[0-9]{10}"
                            required
                            autocomplete="tel">
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" class="btn btn-primary btn-block">
                        Continue to Dashboard
                    </button>
                </form>

                <!-- Back Button -->
                <button class="btn btn-link" onclick="showScreen('landing')">
                    ‚Üê Back to Home
                </button>
            </div>
        </div>
    </div>

    <!-- ==================================================================================
         SECTION 3: STUDENT DASHBOARD - Browse & Order Food
         Purpose: Students can browse kitchens, view menus, add items to cart, place orders
         ================================================================================== -->

    <!-- ===== LANDING SCREEN ===== -->
    <div id="role-screen" class="screen active">
        <header class="main-header">
            <h1>‚ù§Ô∏è ‡§Æ‡§æ‡§Å ‡§ï‡§æ ‡§™‡•ç‡§Ø‡§æ‡§∞ (Maa Ka Pyaar)</h1>
            <p>Connecting Home Kitchens with Hungry Hearts</p>
        </header>
        <div class="role-container">
            <h2>Who are you?</h2>
            <div class="role-buttons">
                <button class="btn btn-primary btn-large" onclick="goToLogin('cook')">üë©‚Äçüç≥ I am a Mother (Cook)</button>
                <button class="btn btn-primary btn-large" onclick="goToLogin('student')">üßë‚Äçüíª I am a Student</button>
                <button class="btn btn-primary btn-large" onclick="goToLogin('admin')">üë®‚Äçüíº I am an Administrator</button>
            </div>
        </div>
    </div>

    <!-- ===== AUTH SCREEN ===== -->
    <div id="auth-screen" class="screen">
        <div class="auth-card">
            <h2 id="auth-title">Create Account</h2>
            <p class="subtitle">Enter your details to continue.</p>
            
            <form id="detailsForm" onsubmit="handleLogin(event)">
                <input type="text" id="u_name" placeholder="Your Name (e.g. Suman)" required>
                <input type="tel" id="u_mobile" placeholder="Mobile Number" required>
                <button type="submit" class="btn btn-primary full-width">Enter Dashboard</button>
            </form>
            
            <button class="btn btn-text" onclick="showScreen('role')">Back</button>
        </div>
    </div>

    <!-- ===== MOTHER DASHBOARD ===== -->
    <div id="mother-dashboard-screen" class="screen">
        <nav class="student-nav" style="border-bottom: 4px solid var(--warm-yellow);">
            <div class="nav-brand">üë©‚Äçüç≥ My Kitchen Control</div>
            <div class="nav-icons">
                <button class="btn btn-small" onclick="showScreen('mother-history')">üìú Order History</button>
                <button class="btn btn-small" onclick="openSupportForm()">üéß Support</button>
                <span>Welcome, <b id="mom-name-display">Mother</b></span>
                <button class="btn btn-small btn-secondary" onclick="logout()">Logout</button>
            </div>
        </nav>

        <div class="container main-layout">
            <!-- LEFT COLUMN: Orders & Profile -->
            <div class="menu-section">
                
                <!-- Incoming Orders Panel -->
                <div class="card orders-panel">
                    <h3>üîî Incoming Orders</h3>
                    <div id="motherOrderList" class="orders-list">
                        <p class="empty-state">No orders yet. Waiting for students...</p>
                    </div>
                </div>

                <!-- ===== KITCHEN PROFILE MANAGEMENT SECTION ===== -->
                <div class="profile-management-card">
                    <div class="card-header">
                        <h3>üè† Kitchen Profile Management</h3>
                        <p class="card-subtitle">Manage your restaurant information and branding</p>
                    </div>
                    
                    <div class="profile-form-section">
                        <div class="form-group">
                            <label class="form-label" for="kitchenNameInput">
                                <span class="label-icon">üè™</span>
                                Restaurant Name
                            </label>
                            <input type="text" id="kitchenNameInput" class="form-input" placeholder="Enter your restaurant name">
                            <small class="form-help">This name will be displayed to customers</small>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="kitchenSpecInput">
                                <span class="label-icon">üçΩÔ∏è</span>
                                Cuisine Specialty
                            </label>
                            <input type="text" id="kitchenSpecInput" class="form-input" placeholder="e.g., North Indian, South Indian, Chinese">
                            <small class="form-help">Describe your cooking style or specialty</small>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="kitchenDescInput">
                                <span class="label-icon">üìù</span>
                                Kitchen Description
                            </label>
                            <textarea id="kitchenDescInput" class="form-textarea" rows="3" placeholder="Tell customers about your kitchen, cooking style, and what makes your food special..."></textarea>
                            <small class="form-help">Optional: Add a personal touch to attract customers</small>
                        </div>
                        
                        <div class="form-actions">
                            <button class="btn btn-primary" onclick="saveKitchenProfile()">
                                <span class="btn-icon">üíæ</span>
                                Update Profile
                            </button>
                            <button class="btn btn-secondary" onclick="resetProfileForm()">
                                <span class="btn-icon">üîÑ</span>
                                Reset
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ===== KITCHEN TIMING MANAGEMENT SECTION ===== -->
                <div class="timing-management-card">
                    <div class="card-header">
                        <h3>‚è∞ Kitchen Timing Management</h3>
                        <p class="card-subtitle">Control when your kitchen accepts orders</p>
                    </div>
                    
                    <div class="timing-form-section">
                        <!-- Current Status Display -->
                        <div class="current-status-display" id="kitchenStatusDisplay">
                            <div class="status-indicator" id="statusIndicator">
                                <span class="status-dot" id="statusDot"></span>
                                <span class="status-text" id="statusText">Checking...</span>
                            </div>
                            <div class="status-details" id="statusDetails">
                                <span id="timingDetails">Loading timing information...</span>
                            </div>
                        </div>
                        
                        <!-- Timing Mode Selection -->
                        <div class="timing-mode-section">
                            <h4 class="section-title">Timing Mode</h4>
                            <div class="timing-mode-options">
                                <label class="timing-option">
                                    <input type="radio" name="timingMode" value="auto" id="autoTimingRadio" onchange="setTimingMode('auto')">
                                    <div class="option-content">
                                        <div class="option-header">
                                            <span class="option-icon">ü§ñ</span>
                                            <span class="option-title">Automatic Timing</span>
                                        </div>
                                        <p class="option-description">Kitchen opens at 9:00 AM and closes at 9:00 PM daily</p>
                                    </div>
                                </label>
                                
                                <label class="timing-option">
                                    <input type="radio" name="timingMode" value="manual" id="manualTimingRadio" onchange="setTimingMode('manual')">
                                    <div class="option-content">
                                        <div class="option-header">
                                            <span class="option-icon">‚öôÔ∏è</span>
                                            <span class="option-title">Custom Timing</span>
                                        </div>
                                        <p class="option-description">Set your own opening and closing hours</p>
                                    </div>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Manual Timing Settings -->
                        <div class="manual-timing-section" id="manualTimingSection">
                            <h4 class="section-title">Custom Hours</h4>
                            <div class="time-inputs-row">
                                <div class="form-group">
                                    <label class="form-label" for="openingTime">
                                        <span class="label-icon">üåÖ</span>
                                        Opening Time
                                    </label>
                                    <input type="time" id="openingTime" class="form-input time-input" value="09:00">
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="closingTime">
                                        <span class="label-icon">üåô</span>
                                        Closing Time
                                    </label>
                                    <input type="time" id="closingTime" class="form-input time-input" value="21:00">
                                </div>
                            </div>
                            <small class="form-help">Set your daily operating hours</small>
                        </div>
                        
                        <!-- Manual Override Section -->
                        <div class="manual-override-section">
                            <h4 class="section-title">Quick Controls</h4>
                            <div class="override-controls">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="kitchenOpenCheckbox" onchange="toggleKitchenStatus()">
                                    <span class="toggle-slider"></span>
                                    <span class="toggle-label">Kitchen is Currently Open</span>
                                </label>
                                <small class="form-help">Override automatic timing temporarily</small>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button class="btn btn-primary" onclick="saveKitchenTiming()">
                                <span class="btn-icon">üíæ</span>
                                Save Timing Settings
                            </button>
                            <button class="btn btn-secondary" onclick="resetTimingToDefaults()">
                                <span class="btn-icon">üîÑ</span>
                                Reset to Defaults
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RIGHT COLUMN: Menu Management -->
            <div class="cart-section">
                <div class="cart-card">
                    <h3>üç≤ Manage Menu</h3>
                    <div class="add-menu-form">
                        <h4 style="margin-bottom: 10px;">+ Add New Item</h4>
                        <select id="newItemCategory">
                            <option value="breakfast">Breakfast</option>
                            <option value="lunch">Lunch</option>
                            <option value="snack">Snacks</option>
                            <option value="dinner">Dinner</option>
                        </select>
                        <input type="text" id="newItemName" placeholder="Item Name (e.g. Poha)">
                        <input type="number" id="newItemPrice" placeholder="Price (‚Çπ)">
                        
                        <label class="small-label">Item Image (Optional)</label>
                        <input type="file" id="newItemImage" accept="image/*" onchange="previewImage(event)">
                        <div id="imagePreview" style="display: none; margin: 10px 0;">
                            <img id="previewImg" style="max-width: 100%; max-height: 150px; border-radius: 8px; object-fit: cover;">
                        </div>
                        
                        <button class="btn btn-primary full-width" onclick="addMyMenuItem()">Add to Menu</button>
                    </div>

                    <hr style="margin: 15px 0; border: 0; border-top: 1px solid #ddd;">

                    <h4>Active Menu:</h4>
                    <ul id="myMenuList" class="cart-list" style="max-height: 400px;"></ul>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== STUDENT DASHBOARD ===== -->
    <div id="student-dashboard-screen" class="screen">
        <nav class="student-nav">
            <div class="nav-brand">‚ù§Ô∏è ‡§Æ‡§æ‡§Å ‡§ï‡§æ ‡§™‡•ç‡§Ø‡§æ‡§∞</div>
            <div class="nav-icons">
                <button class="btn btn-small" onclick="showScreen('student-history')">üìú My Orders</button>
                <button class="btn btn-small" onclick="openSupportForm()">üéß Support</button>
                <div class="icon-wrap" onclick="toggleNotifications()">
                    üîî <span id="notif-badge" class="badge" style="display:none">0</span>
                    <div id="notif-dropdown" class="dropdown hidden">
                        <h4>Notifications</h4>
                        <ul id="notif-list"><li class="empty-state">No new alerts</li></ul>
                    </div>
                </div>
                <div class="icon-wrap" onclick="scrollToCart()">
                    üõí <span id="cart-count" class="badge">0</span>
                </div>
                <button class="btn btn-small" onclick="logout()">Logout</button>
            </div>
        </nav>

        <div class="container main-layout">
            <div class="menu-section">

                <!-- Kitchen List -->
                <div id="kitchens-list-view">
                    <h3 class="section-title">üè† Select a Mother's Kitchen</h3>
                    <div id="kitchensGrid" class="kitchen-grid"></div>
                </div>

                <!-- Single Menu -->
                <div id="single-kitchen-view" class="hidden">
                    <button class="btn-text back-btn" onclick="backToKitchens()">‚Üê Back to Kitchens</button>
                    <div class="kitchen-header">
                        <h2 id="activeKitchenName">Kitchen Name</h2>
                        <span id="activeKitchenRating" class="rating">‚≠ê 5.0</span>
                    </div>
                    <div class="tabs">
                        <button class="tab-btn active" onclick="filterMenu('breakfast')">Breakfast</button>
                        <button class="tab-btn" onclick="filterMenu('lunch')">Lunch</button>
                        <button class="tab-btn" onclick="filterMenu('snack')">Snacks</button>
                        <button class="tab-btn" onclick="filterMenu('dinner')">Dinner</button>
                    </div>
                    <div id="studentMenuList" class="food-grid"></div>
                </div>
            </div>

            <div class="cart-section" id="cart-anchor">
                <div class="cart-card">
                    <h3>üõí Your Plate</h3>
                    <ul id="cartList" class="cart-list"><li class="empty-state">Plate is empty</li></ul>
                    <div class="cart-total">Total: ‚Çπ<span id="cartTotal">0</span></div>
                    <button class="btn btn-primary full-width" onclick="placeOrder()">Place Order</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== CHECKOUT SCREEN ===== -->
    <div id="checkout-screen" class="screen">
        <nav class="student-nav">
            <div class="nav-brand">‚ù§Ô∏è ‡§Æ‡§æ‡§Å ‡§ï‡§æ ‡§™‡•ç‡§Ø‡§æ‡§∞ - Checkout</div>
            <div class="nav-icons">
                <button class="btn btn-small" onclick="backToCart()">‚Üê Back to Cart</button>
            </div>
        </nav>

        <div class="container">
            <div class="checkout-layout">
                <!-- LEFT: Forms -->
                <div class="checkout-forms">
                    <div class="checkout-card">
                        <h3>üìç Delivery Address</h3>
                        <input type="text" id="deliveryName" placeholder="Full Name" required>
                        <input type="tel" id="deliveryPhone" placeholder="Phone Number" required>
                        <textarea id="deliveryAddress" placeholder="Full Address (Street, City, Pincode)" rows="3" required></textarea>
                    </div>

                    <div class="checkout-card">
                        <h3>üí≥ Payment Details</h3>
                        <input type="text" id="cardNumber" placeholder="Card Number (e.g., 1234 5678 9012 3456)" required>
                        <input type="text" id="cardExpiry" placeholder="Expiry (MM/YY)" required>
                        <input type="text" id="cardCVV" placeholder="CVV" required>
                        <input type="text" id="cardName" placeholder="Name on Card" required>
                    </div>
                </div>

                <!-- RIGHT: Order Summary -->
                <div class="checkout-summary">
                    <div class="checkout-card">
                        <h3>üìã Order Summary</h3>
                        <div id="checkoutItems" class="summary-items"></div>
                        <hr>
                        <div class="summary-line"><span>Subtotal:</span> ‚Çπ<span id="checkoutSubtotal">0</span></div>
                        <div class="summary-line"><span>Delivery Fee:</span> ‚Çπ<span id="checkoutDelivery">50</span></div>
                        <div class="summary-line"><span>Tax (5%):</span> ‚Çπ<span id="checkoutTax">0</span></div>
                        <hr>
                        <div class="summary-total"><strong>Total: ‚Çπ<span id="checkoutTotal">0</span></strong></div>
                        <button class="btn btn-primary full-width" onclick="confirmPayment()">Pay Now</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== ORDER HISTORY SCREENS ===== -->
    <div id="mother-history-screen" class="screen">
        <nav class="student-nav" style="border-bottom: 4px solid var(--warm-yellow);">
            <div class="nav-brand">üë©‚Äçüç≥ Order History</div>
            <div class="nav-icons">
                <button class="btn btn-small" onclick="showScreen('mother-dashboard')">‚Üê Back to Dashboard</button>
                <button class="btn btn-small btn-secondary" onclick="logout()">Logout</button>
            </div>
        </nav>

        <div class="container">
            <h2 class="section-title">üìú All Orders</h2>
            <div id="motherHistoryList" class="history-container">
                <p class="empty-state">No orders yet.</p>
            </div>
        </div>
    </div>

    <div id="student-history-screen" class="screen">
        <nav class="student-nav">
            <div class="nav-brand">‚ù§Ô∏è My Orders</div>
            <div class="nav-icons">
                <button class="btn btn-small" onclick="showScreen('student-dashboard')">‚Üê Back to Dashboard</button>
                <button class="btn btn-small" onclick="logout()">Logout</button>
            </div>
        </nav>

        <div class="container">
            <h2 class="section-title">üìú Order History</h2>
            <div id="studentHistoryList" class="history-container">
                <p class="empty-state">No orders yet.</p>
            </div>
        </div>
    </div>

2    <!-- ===== ADMIN DASHBOARD ===== -->
    <div id="admin-dashboard-screen" class="screen">
        <nav class="student-nav" style="border-bottom: 4px solid var(--info-blue);">
            <div class="nav-brand">üë®‚Äçüíº Admin Dashboard</div>
            <div class="nav-icons">
                <button class="btn btn-small" onclick="showAdminSection('refunds')">üí∞ Refunds</button>
                <button class="btn btn-small" onclick="showAdminSection('support')">üéß Support</button>
                <button class="btn btn-small" onclick="showAdminSection('analytics')">üìä Analytics</button>
                <button class="btn btn-small" onclick="showAdminSection('users')">üë• Users</button>
                <span>Welcome, <b id="admin-name-display">Admin</b></span>
                <button class="btn btn-small btn-secondary" onclick="logout()">Logout</button>
            </div>
        </nav>

        <div class="container">
            <!-- Refund Management Section -->
            <div id="admin-refunds-section" class="admin-section">
                <h2 class="section-title">üí∞ Refund Management</h2>
                
                <div class="admin-stats">
                    <div class="stat-card">
                        <h3 id="pending-refunds-count">0</h3>
                        <p>Pending Refunds</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="total-refund-amount">‚Çπ0</h3>
                        <p>Total Refund Amount</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="processed-refunds-count">0</h3>
                        <p>Processed Today</p>
                    </div>
                </div>

                <div class="refund-requests-panel">
                    <h3>üîî Pending Refund Requests</h3>
                    <div id="adminRefundList" class="orders-list">
                        <p class="empty-state">No pending refund requests.</p>
                    </div>
                </div>
            </div>

            <!-- Support Management Section -->
            <div id="admin-support-section" class="admin-section hidden">
                <h2 class="section-title">üéß Customer Support</h2>
                
                <div class="admin-stats">
                    <div class="stat-card">
                        <h3 id="open-tickets-count">0</h3>
                        <p>Open Tickets</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="avg-response-time">0h</h3>
                        <p>Avg Response Time</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="resolved-tickets-count">0</h3>
                        <p>Resolved Today</p>
                    </div>
                </div>

                <div class="support-tickets-panel">
                    <h3>üé´ Support Tickets</h3>
                    <div id="adminSupportList" class="orders-list">
                        <p class="empty-state">No support tickets.</p>
                    </div>
                </div>
            </div>

            <!-- Analytics Section -->
            <div id="admin-analytics-section" class="admin-section hidden">
                <h2 class="section-title">üìä Platform Analytics</h2>
                
                <div class="admin-stats">
                    <div class="stat-card">
                        <h3 id="total-orders-count">0</h3>
                        <p>Total Orders</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="total-revenue">‚Çπ0</h3>
                        <p>Total Revenue</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="active-kitchens-count">0</h3>
                        <p>Active Kitchens</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="total-users-count">0</h3>
                        <p>Total Users</p>
                    </div>
                </div>

                <div class="analytics-charts">
                    <div class="chart-card">
                        <h3>üìà Orders This Week</h3>
                        <div id="ordersChart" class="chart-placeholder">
                            <p>Chart visualization would go here</p>
                        </div>
                    </div>
                    <div class="chart-card">
                        <h3>ÔøΩ  Revenue Trends</h3>
                        <div id="revenueChart" class="chart-placeholder">
                            <p>Revenue chart would go here</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- User Management Section -->
            <div id="admin-users-section" class="admin-section hidden">
                <h2 class="section-title">üë• User Management</h2>
                
                <div class="user-management-panel">
                    <h3>üë®‚Äçüç≥ Registered Cooks</h3>
                    <div id="adminCooksList" class="users-list">
                        <p class="empty-state">No registered cooks.</p>
                    </div>
                </div>

                <div class="user-management-panel">
                    <h3>üßë‚Äçüíª Registered Students</h3>
                    <div id="adminStudentsList" class="users-list">
                        <p class="empty-state">No registered students.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== MODALS ===== -->
    
    <!-- Support Form Modal -->
    <div id="supportFormModal" class="modal">
        <div class="modal-content">
            <h3>üéß Contact Support</h3>
            <form id="supportForm" onsubmit="submitSupportTicket(event)">
                <label class="small-label">Subject</label>
                <input type="text" id="supportSubject" placeholder="Brief description of your issue" required>
                
                <label class="small-label">Priority</label>
                <select id="supportPriority">
                    <option value="Low">Low</option>
                    <option value="Medium" selected>Medium</option>
                    <option value="High">High</option>
                </select>
                
                <label class="small-label">Description</label>
                <textarea id="supportDescription" placeholder="Please describe your issue in detail..." rows="5" required></textarea>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-text" onclick="closeSupportForm()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Submit Ticket</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Support Ticket Modal -->
    <div id="supportTicketModal" class="modal">
        <div class="modal-content">
            <h3>üé´ Support Ticket Details</h3>
            <div id="ticketDetails">
                <!-- Ticket details will be populated here -->
            </div>
            <div class="modal-actions">
                <button class="btn btn-text" onclick="closeSupportModal()">Close</button>
                <button class="btn btn-primary" onclick="respondToTicket()">Respond</button>
            </div>
        </div>
    </div>

    <!-- Food Item Modal -->
    <div id="customModal" class="modal">
        <div class="modal-content">
            <h3>Add to Plate</h3>
            <p id="modalFoodName" class="highlight-text">Food Name</p>
            <p id="modalFoodPrice" style="color: #2E7D32; font-weight: bold; font-size: 1.1em; margin: 10px 0;">‚Çπ<span id="modalPrice">0</span></p>
            
            <label class="small-label">Quantity</label>
            <div class="quantity-selector">
                <button class="qty-btn" onclick="decreaseQuantity()">‚àí</button>
                <input type="number" id="itemQuantity" value="1" min="1" max="10" readonly>
                <button class="qty-btn" onclick="increaseQuantity()">+</button>
            </div>
            
            <label class="small-label" style="margin-top: 15px;">Special Request (Optional)</label>
            <input type="text" id="customNote" placeholder="Any special request?">
            
            <div class="modal-total">
                <span>Total:</span>
                <span id="modalTotal">‚Çπ0</span>
            </div>
            
            <div class="modal-actions">
                <button class="btn btn-text" onclick="closeModal()">Cancel</button>
                <button class="btn btn-primary" onclick="confirmAddToCart()">Add to Cart</button>
            </div>
        </div>
    </div>

    <script>
        // DIRECT FUNCTION DEFINITIONS - GUARANTEED TO WORK
        console.log('üîß Loading direct functions...');
        
        // Global state
        let currentUser = { name: '', role: '', mobile: '' };
        let currentKitchen = null;
        
        // Core functions defined directly in HTML
        function goToLogin(role) {
            console.log('üöÄ goToLogin called with role:', role);
            
            currentUser.role = role;
            let title = "Login";
            
            if (role === 'cook') title = "üë©‚Äçüç≥ Mother Login";
            else if (role === 'student') title = "üßë‚Äçüíª Student Login";
            else if (role === 'admin') title = "üë®‚Äçüíº Administrator Login";
            
            const authTitle = document.getElementById('auth-title');
            if (authTitle) {
                authTitle.innerText = title;
            }
            
            showScreen('auth');
        }
        
        function showScreen(id) {
            console.log('üîÑ Switching to screen:', id);
            
            // Hide all screens
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            
            // Show target screen
            const targetId = id.endsWith('-screen') ? id : id + '-screen';
            const el = document.getElementById(targetId);
            
            if (el) {
                el.classList.add('active');
                console.log('‚úÖ Screen switched to:', targetId);
            } else {
                console.error('‚ùå Screen not found:', targetId);
            }
        }
        
        function handleLogin(e) {
            e.preventDefault();
            console.log('üìù handleLogin called');
            
            const name = document.getElementById('u_name').value;
            const mobile = document.getElementById('u_mobile').value;
            
            if (!name || !mobile) {
                alert('Please fill in all fields');
                return;
            }
            
            currentUser.name = name;
            currentUser.mobile = mobile;
            
            // Update name displays
            const momNameDisplay = document.getElementById('mom-name-display');
            const adminNameDisplay = document.getElementById('admin-name-display');
            
            if (currentUser.role === 'cook') {
                console.log('‚úÖ Logging in as Cook:', name);
                if (momNameDisplay) momNameDisplay.innerText = name;
                
                // Create a basic kitchen for the cook
                currentKitchen = {
                    id: Date.now(),
                    name: name + "'s Kitchen",
                    ownerName: name,
                    specialty: "Home Food",
                    description: "Delicious home-cooked meals made with love.",
                    isOpen: true,
                    autoTiming: true,
                    openingTime: "09:00",
                    closingTime: "21:00"
                };
                
                showScreen('mother-dashboard');
                
                // Initialize timing settings after screen is shown
                setTimeout(function() {
                    initializeKitchenTiming();
                }, 100);
                
            } else if (currentUser.role === 'student') {
                console.log('‚úÖ Logging in as Student:', name);
                showScreen('student-dashboard');
                
            } else if (currentUser.role === 'admin') {
                console.log('‚úÖ Logging in as Admin:', name);
                if (adminNameDisplay) adminNameDisplay.innerText = name;
                showScreen('admin-dashboard');
            }
            
            console.log('üéâ Login completed successfully for:', currentUser.role);
        }
        
        function logout() {
            currentUser = { name: '', role: '', mobile: '' };
            showScreen('role');
            const form = document.getElementById('detailsForm');
            if (form) form.reset();
        }
        
        // Make functions globally available
        window.goToLogin = goToLogin;
        window.showScreen = showScreen;
        window.handleLogin = handleLogin;
        window.logout = logout;
        
        // Kitchen Profile Management Functions
        function saveKitchenProfile() {
            const nameInput = document.getElementById('kitchenNameInput');
            const specialtyInput = document.getElementById('kitchenSpecInput');
            const descriptionInput = document.getElementById('kitchenDescInput');
            
            if (!nameInput || !specialtyInput) {
                alert('Form elements not found');
                return;
            }
            
            const name = nameInput.value.trim();
            const specialty = specialtyInput.value.trim();
            const description = descriptionInput.value.trim();
            
            if (!name || !specialty) {
                alert('Please fill in restaurant name and specialty');
                return;
            }
            
            if (currentKitchen) {
                currentKitchen.name = name;
                currentKitchen.specialty = specialty;
                currentKitchen.description = description;
                
                alert('‚úÖ Kitchen profile updated successfully!\n\nName: ' + name + '\nSpecialty: ' + specialty + '\nDescription: ' + description);
            } else {
                alert('No kitchen found. Please login as a cook first.');
            }
        }
        
        function resetProfileForm() {
            if (currentKitchen) {
                const nameInput = document.getElementById('kitchenNameInput');
                const specialtyInput = document.getElementById('kitchenSpecInput');
                const descriptionInput = document.getElementById('kitchenDescInput');
                
                if (nameInput) nameInput.value = currentKitchen.name || '';
                if (specialtyInput) specialtyInput.value = currentKitchen.specialty || '';
                if (descriptionInput) descriptionInput.value = currentKitchen.description || '';
                
                alert('Form reset to saved values');
            }
        }
        
        // Kitchen Timing Management Functions
        function setTimingMode(mode) {
            console.log('üïí Setting timing mode to:', mode);
            
            const manualSection = document.getElementById('manualTimingSection');
            const autoRadio = document.getElementById('autoTimingRadio');
            const manualRadio = document.getElementById('manualTimingRadio');
            
            if (!manualSection) {
                alert('Manual timing section not found');
                return;
            }
            
            if (mode === 'auto') {
                // Hide manual timing section
                manualSection.style.display = 'none';
                
                if (currentKitchen) {
                    currentKitchen.autoTiming = true;
                    currentKitchen.openingTime = "09:00";
                    currentKitchen.closingTime = "21:00";
                }
                
                // Update time inputs to show auto values
                const openingTime = document.getElementById('openingTime');
                const closingTime = document.getElementById('closingTime');
                if (openingTime) openingTime.value = "09:00";
                if (closingTime) closingTime.value = "21:00";
                
                updateKitchenStatusDisplay();
                alert('‚úÖ Automatic timing enabled!\n\nYour kitchen will:\n‚Ä¢ Open at 9:00 AM\n‚Ä¢ Close at 9:00 PM\n‚Ä¢ Automatically manage status');
                
            } else if (mode === 'manual') {
                // Show manual timing section
                manualSection.style.display = 'block';
                
                if (currentKitchen) {
                    currentKitchen.autoTiming = false;
                    // Keep existing times or set defaults
                    if (!currentKitchen.openingTime) currentKitchen.openingTime = "09:00";
                    if (!currentKitchen.closingTime) currentKitchen.closingTime = "21:00";
                }
                
                // Update time inputs with current values
                const openingTime = document.getElementById('openingTime');
                const closingTime = document.getElementById('closingTime');
                if (openingTime && currentKitchen) openingTime.value = currentKitchen.openingTime;
                if (closingTime && currentKitchen) closingTime.value = currentKitchen.closingTime;
                
                updateKitchenStatusDisplay();
                alert('‚úÖ Custom timing mode enabled!\n\nYou can now:\n‚Ä¢ Set your own opening hours\n‚Ä¢ Set your own closing hours\n‚Ä¢ Manually control kitchen status');
            }
        }
        function toggleKitchenStatus() {
            console.log('üîÑ Toggling kitchen status');
            
            const checkbox = document.getElementById('kitchenOpenCheckbox');
            if (!checkbox) {
                alert('Kitchen status checkbox not found');
                return;
            }
            
            if (currentKitchen) {
                currentKitchen.isOpen = checkbox.checked;
                
                const status = currentKitchen.isOpen ? 'OPEN' : 'CLOSED';
                const message = currentKitchen.autoTiming 
                    ? `Kitchen is now ${status}\n\nNote: This is a manual override. The kitchen will revert to automatic timing at the next scheduled time.`
                    : `Kitchen is now ${status}`;
                
                updateKitchenStatusDisplay();
                alert('‚úÖ ' + message);
            } else {
                alert('No kitchen found. Please login as a cook first.');
            }
        }
        
        function saveKitchenTiming() {
            console.log('üíæ Saving kitchen timing settings');
            
            if (!currentKitchen) {
                alert('No kitchen found. Please login as a cook first.');
                return;
            }
            
            if (!currentKitchen.autoTiming) {
                // Manual timing - validate and save custom hours
                const openingTime = document.getElementById('openingTime');
                const closingTime = document.getElementById('closingTime');
                
                if (!openingTime || !closingTime) {
                    alert('Time input fields not found');
                    return;
                }
                
                const openTime = openingTime.value;
                const closeTime = closingTime.value;
                
                if (!openTime || !closeTime) {
                    alert('Please set both opening and closing times');
                    return;
                }
                
                // Validate that opening time is before closing time
                if (openTime >= closeTime) {
                    alert('Opening time must be before closing time');
                    return;
                }
                
                currentKitchen.openingTime = openTime;
                currentKitchen.closingTime = closeTime;
                
                updateKitchenStatusDisplay();
                alert('‚úÖ Custom timing saved successfully!\n\nOpening Time: ' + openTime + '\nClosing Time: ' + closeTime + '\n\nYour kitchen will now operate according to these hours.');
            } else {
                // Auto timing
                alert('‚úÖ Automatic timing confirmed!\n\nYour kitchen operates:\n‚Ä¢ 9:00 AM - 9:00 PM daily\n‚Ä¢ Automatic status management');
            }
        }
        
        function resetTimingToDefaults() {
            console.log('üîÑ Resetting timing to defaults');
            
            if (!currentKitchen) {
                alert('No kitchen found. Please login as a cook first.');
                return;
            }
            
            // Reset to automatic timing
            currentKitchen.autoTiming = true;
            currentKitchen.openingTime = "09:00";
            currentKitchen.closingTime = "21:00";
            currentKitchen.isOpen = true;
            
            // Update UI elements
            const autoRadio = document.getElementById('autoTimingRadio');
            const manualRadio = document.getElementById('manualTimingRadio');
            const manualSection = document.getElementById('manualTimingSection');
            const openingTime = document.getElementById('openingTime');
            const closingTime = document.getElementById('closingTime');
            const kitchenCheckbox = document.getElementById('kitchenOpenCheckbox');
            
            if (autoRadio) autoRadio.checked = true;
            if (manualRadio) manualRadio.checked = false;
            if (manualSection) manualSection.style.display = 'none';
            if (openingTime) openingTime.value = "09:00";
            if (closingTime) closingTime.value = "21:00";
            if (kitchenCheckbox) kitchenCheckbox.checked = true;
            
            updateKitchenStatusDisplay();
            alert('‚úÖ Timing reset to defaults!\n\nMode: Automatic\nHours: 9:00 AM - 9:00 PM\nStatus: Open');
        }
        
        // Initialize kitchen timing settings
        function initializeKitchenTiming() {
            console.log('üîß Initializing kitchen timing settings');
            
            if (!currentKitchen) return;
            
            // Load profile data
            const nameInput = document.getElementById('kitchenNameInput');
            const specialtyInput = document.getElementById('kitchenSpecInput');
            const descriptionInput = document.getElementById('kitchenDescInput');
            
            if (nameInput) nameInput.value = currentKitchen.name || '';
            if (specialtyInput) specialtyInput.value = currentKitchen.specialty || '';
            if (descriptionInput) descriptionInput.value = currentKitchen.description || '';
            
            // Set timing mode
            const autoRadio = document.getElementById('autoTimingRadio');
            const manualRadio = document.getElementById('manualTimingRadio');
            const manualSection = document.getElementById('manualTimingSection');
            const openingTime = document.getElementById('openingTime');
            const closingTime = document.getElementById('closingTime');
            
            if (autoRadio && manualRadio) {
                autoRadio.checked = currentKitchen.autoTiming;
                manualRadio.checked = !currentKitchen.autoTiming;
            }
            
            if (openingTime) openingTime.value = currentKitchen.openingTime;
            if (closingTime) closingTime.value = currentKitchen.closingTime;
            
            // Show/hide manual section based on timing mode
            if (manualSection) {
                manualSection.style.display = currentKitchen.autoTiming ? 'none' : 'block';
            }
            
            updateKitchenStatusDisplay();
            console.log('‚úÖ Kitchen timing initialized');
        }
        
        // Helper function to update kitchen status display
        function updateKitchenStatusDisplay() {
            if (!currentKitchen) return;
            
            const statusDiv = document.getElementById('kitchenStatusDisplay');
            const statusText = document.getElementById('statusText');
            const statusDot = document.getElementById('statusDot');
            const timingDetails = document.getElementById('timingDetails');
            const kitchenCheckbox = document.getElementById('kitchenOpenCheckbox');
            
            // Update checkbox
            if (kitchenCheckbox) {
                kitchenCheckbox.checked = currentKitchen.isOpen;
            }
            
            // Update status display
            if (statusDiv && statusText) {
                if (currentKitchen.isOpen) {
                    statusDiv.style.backgroundColor = '#C8E6C9';
                    statusDiv.style.color = '#2E7D32';
                    statusText.innerText = 'Kitchen is Open';
                    if (statusDot) statusDot.style.backgroundColor = '#4CAF50';
                } else {
                    statusDiv.style.backgroundColor = '#FFCDD2';
                    statusDiv.style.color = '#d32f2f';
                    statusText.innerText = 'Kitchen is Closed';
                    if (statusDot) statusDot.style.backgroundColor = '#d32f2f';
                }
            }
            
            // Update timing details
            if (timingDetails) {
                const mode = currentKitchen.autoTiming ? 'Automatic' : 'Manual';
                timingDetails.innerText = `${mode} timing: ${currentKitchen.openingTime} - ${currentKitchen.closingTime}`;
            }
        }
        function addMyMenuItem() { alert('Add menu item clicked - external script will handle this'); }
        function openSupportForm() { alert('Support form clicked - external script will handle this'); }
        function closeSupportForm() { const modal = document.getElementById('supportFormModal'); if (modal) modal.style.display = 'none'; }
        function submitSupportTicket(e) { e.preventDefault(); alert('Support ticket submitted - external script will handle this'); }
        function toggleNotifications() { alert('Notifications clicked - external script will handle this'); }
        function scrollToCart() { alert('Scroll to cart clicked - external script will handle this'); }
        function backToKitchens() { alert('Back to kitchens clicked - external script will handle this'); }
        function filterMenu(cat) { alert('Filter menu clicked: ' + cat + ' - external script will handle this'); }
        function placeOrder() { alert('Place order clicked - external script will handle this'); }
        function backToCart() { alert('Back to cart clicked - external script will handle this'); }
        function confirmPayment() { alert('Confirm payment clicked - external script will handle this'); }
        function showAdminSection(section) { alert('Admin section clicked: ' + section + ' - external script will handle this'); }
        function closeSupportModal() { const modal = document.getElementById('supportTicketModal'); if (modal) modal.style.display = 'none'; }
        function respondToTicket() { alert('Respond to ticket clicked - external script will handle this'); }
        function decreaseQuantity() { alert('Decrease quantity clicked - external script will handle this'); }
        function increaseQuantity() { alert('Increase quantity clicked - external script will handle this'); }
        function closeModal() { const modal = document.getElementById('customModal'); if (modal) modal.style.display = 'none'; }
        function confirmAddToCart() { alert('Add to cart clicked - external script will handle this'); }
        
        // Make all functions globally available
        window.saveKitchenProfile = saveKitchenProfile;
        window.resetProfileForm = resetProfileForm;
        window.setTimingMode = setTimingMode;
        window.toggleKitchenStatus = toggleKitchenStatus;
        window.saveKitchenTiming = saveKitchenTiming;
        window.resetTimingToDefaults = resetTimingToDefaults;
        window.addMyMenuItem = addMyMenuItem;
        window.openSupportForm = openSupportForm;
        window.closeSupportForm = closeSupportForm;
        window.submitSupportTicket = submitSupportTicket;
        window.toggleNotifications = toggleNotifications;
        window.scrollToCart = scrollToCart;
        window.backToKitchens = backToKitchens;
        window.filterMenu = filterMenu;
        window.placeOrder = placeOrder;
        window.backToCart = backToCart;
        window.confirmPayment = confirmPayment;
        window.showAdminSection = showAdminSection;
        window.closeSupportModal = closeSupportModal;
        window.respondToTicket = respondToTicket;
        window.decreaseQuantity = decreaseQuantity;
        window.increaseQuantity = increaseQuantity;
        window.closeModal = closeModal;
        window.confirmAddToCart = confirmAddToCart;
        
        console.log('‚úÖ Direct functions loaded and available');
        console.log('Functions check:', {
            goToLogin: typeof goToLogin,
            showScreen: typeof showScreen,
            handleLogin: typeof handleLogin,
            logout: typeof logout
        });
    </script>
    
    <script src="script.js"></script>
    
    <script>
        // Final verification
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üéØ Page fully loaded - final verification');
            console.log('‚úÖ goToLogin:', typeof window.goToLogin);
            console.log('‚úÖ All login buttons should now work!');
            
            // Test the function directly
            if (typeof window.goToLogin === 'function') {
                console.log('üéâ SUCCESS: Login buttons are ready to use!');
            } else {
                console.error('‚ùå FAILED: goToLogin function still not available');
            }
        });
    </script>
</body>
</html>